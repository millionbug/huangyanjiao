#跨域的所有相关

浏览器对与个人信息的安全保护
1.浏览器发起的请求都会带上相应站点的cookie，cookie数据非常重要。所以浏览器设置了跨域来避免b.com中发起对a.com的请求时带上了a.com的cookie来做你不想做的事情。所以浏览器再b.com中发起的对a.com的请求不会带上cookie。

ajax发起的请求和浏览器直接输入URL之间有什么区别：
浏览器：直接输入URL的请求方法是get方法，服务器根据这个URL与get方法返回结果并且交给浏览器处理。浏览器会根据返回的http码和返回的结果类型，例如content-type来决定如何处理
xhr与fetch：1.请求方法可以自己设置 2.可以自定义请求头 3.当自定义非标准的有限几个请求头时活着某种复杂方法时，并且跨域时，会有浏览器默认行为被触发：先发送当前要发送的请求的URL的options方法来判断服务器是否允许跨域，接收到允许跨域的返回时会自动将options方法升级为当前定义的方法，然后带上完整数据请求一次。4.请求返回的结果会交给xhr与fetch来处理，所以返回302重定向的时候并不会真的重定向
安全：出于安全原因，浏览器限制从脚本内发起的跨源HTTP请求

这一段看起来跨域请求是保护服务器的：
允许服务器声明哪些源站通过浏览器有权限访问哪些资源。另外，规范要求，对那些可能对服务器数据产生副作用的 HTTP 请求方法（特别是 GET 以外的 HTTP 请求，或者搭配某些 MIME 类型的 POST 请求），浏览器必须首先使用 OPTIONS 方法发起一个预检请求（preflight request），从而获知服务端是否允许该跨域请求。服务器确认允许之后，才发起实际的 HTTP 请求。在预检请求的返回中，服务器端也可以通知客户端，是否需要携带身份凭证（包括 Cookies 和 HTTP 认证相关数据）。


不同源的窗口无法读取cookie
当且仅当使用iframe内嵌的页面和父亲页面拥有同一个父域时，通过将两个页面的域名设置为同一个父域（document.domain），二者的document.cookie是相同的，可以同时读取

Window.postMessage
https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage

问题：
1.浏览器为什么不能跨域
2.为什么服务器指定了origin选项之后就又认为资源是安全的（不包括script／img）
1. 什么是同源策略（Same Origin Policy）？
所谓同源策略，它是浏览器的一种最核心最基本的安全策略。它对来至不同源的文档或这脚本对当前文档的读写操作做了限制。
为什么要有这个策略，想必你已经知道，那就是因为保证用户的信息安全。(所以，网上的所有的插件都只能添加方法到window，然后需要你的主体javascript来调用方法进行dom修改)
如<script>、<img>、<iframe>、<link>等。如果你在页面定义了这些标签，在页面加载事都对不同源的资源发起了一次GET请求。但是通过src加载的资源，浏览器限制了脚本对其返回的内容无法读写。特别是在ajax请求的时候，特别要注意XMLHttpRequest的时候是无法跨域访问的。

cors是一种协议，这是一种显示的声明了我要使用这种支持跨域的方式来处理相关的请求。服务器制定origin是一个显式的动作，因为从浏览器的发展历史一路走过来，跨域的同时需要处理返回的ajax数据是最近的需求，所以需要显式的声明。


